#!/usr/bin/env bash

RESOLUTION=$(xdpyinfo | awk '/dimensions/{print $2}')

export NETWORK_WIRELESS_INTERFACE=$(ip -o -4 route show to default | awk '{print $5}' | grep -Ei "w" | head -1)
export NETWORK_WIRED_INTERFACE=$(ip -o -4 route show to default |  awk '{print $5}' | grep -Ei "e" | head -1)
export FONT0="Terminus Nerd Font:pixelsize=18,3"
export FONT1="Terminus Nerd Font:pixelsize=18,3"
export FONT2="FontAwesome6Free:style=Solid:size=20"
export FONT3="FontAwesome6Free:style=Regular:size=20"
export FONT4="FontAwesome6Brands:style=Regular:size=20"
export FONT4="FontAwesome6Brands:style=Regular:size=20"
export PBHEIGHT="50"

if [ "$COMPUTER_NAME" != "iracema" ]; then
    FONT0="Terminus Nerd Font:pixelsize=10,3"
    FONT1="Terminus Nerd Font:pixelsize=10,3"
    FONT2="FontAwesome6Free:style=Solid:size=10"
    FONT3="FontAwesome6Free:style=Regular:size=10"
    FONT4="FontAwesome6Brands:style=Regular:size=10"
    PBHEIGHT="20"
fi

# Reboot polybar to correctly show workspaces
killall -q polybar &
while pgrep -u $UID -x polybar > /dev/null; do sleep 1; done

exec polybar --reload main
