#!/usr/bin/env bash

i=0
s=49
keys=`ls $HOME/.ssh | rg -v 'pub|hosts|config'`
for f in $keys; do
    files[i]=$(echo -en "\0$(( $s / 64 * 100 + $s % 64 / 8 * 10 + $s % 8 ))")
    files[i+1]="$f"
    ((i=i+2))
    ((s++))
done

result=$(whiptail --backtitle "Select SSH Keys" --title "SSH Key Files" --menu "Please select the key" 14 40 6 "${files[@]}" 3>&2 2>&1 1>&3-) 
if [ -z "$result" ]; then
    echo "Canceled by user"
else
    ((index = 2 * $result - 1))
    echo "${files[$index]}"
fi

